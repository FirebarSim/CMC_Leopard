size = {683,598}

local arial = loadFont("arial.ttf")

function rgbColour(r,g,b,a)
	return {r/255,g/255,b/255,a or 1}
end

function draw()
	setClipArea(44,11,683-(44*2),598-(11*2))
		saveGraphicsContext()
			--GROUND/SKY
			setTranslateTransform(683/2,(598/2))
			setRotateTransform(-1*get(globalPropertyf("sim/cockpit2/gauges/indicators/roll_electric_deg_pilot")))
			setTranslateTransform(0,(-7*get(globalPropertyf("sim/cockpit2/gauges/indicators/pitch_electric_deg_pilot"))))
			drawRectangle(-450,0,900,500,rgbColour(0,120,192))
			drawRectangle(-450,-500,900,500,rgbColour(139,97,56))
			resetClipArea()
		restoreGraphicsContext()
	resetClipArea()
	saveGraphicsContext()
		--PITCH LADDER
		setTranslateTransform(683/2,(598/2))
		setClipArea(-217,-217,217*2,217*2)
			setRotateTransform(-1*get(globalPropertyf("sim/cockpit2/gauges/indicators/roll_electric_deg_pilot")))
			setTranslateTransform(0,(-7*get(globalPropertyf("sim/cockpit2/gauges/indicators/pitch_electric_deg_pilot"))))
			drawWideLine(-50,630,50,630,1,rgbColour(255,255,255))
			drawText(arial,-55,622,"90",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,622,"90",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-20,595,20,595,1,rgbColour(255,255,255))
			drawWideLine(-50,560,50,560,1,rgbColour(255,255,255))
			drawText(arial,-55,552,"80",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,552,"80",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-20,525,20,525,1,rgbColour(255,255,255))
			drawWideLine(-50,490,50,490,1,rgbColour(255,255,255))
			drawText(arial,-55,482,"70",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,482,"70",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-20,455,20,455,1,rgbColour(255,255,255))
			drawWideLine(-50,420,50,420,1,rgbColour(255,255,255))
			drawText(arial,-55,412,"60",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,412,"60",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-20,385,20,385,1,rgbColour(255,255,255))
			drawWideLine(-50,350,50,350,1,rgbColour(255,255,255))
			drawText(arial,-55,342,"50",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,342,"50",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-20,315,20,315,1,rgbColour(255,255,255))
			drawWideLine(-50,280,50,280,1,rgbColour(255,255,255))
			drawText(arial,-55,272,"40",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,272,"40",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-20,245,20,245,1,rgbColour(255,255,255))
			drawWideLine(-50,210,50,210,1,rgbColour(255,255,255))
			drawText(arial,-55,202,"30",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,202,"30",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-20,175,20,175,1,rgbColour(255,255,255))
			drawWideLine(-50,140,50,140,1,rgbColour(255,255,255))
			drawText(arial,-55,132,"20",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,132,"20",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-20,105,20,105,1,rgbColour(255,255,255))
			drawWideLine(-50,70,50,70,1,rgbColour(255,255,255))
			drawText(arial,-55,62,"10",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,62,"10",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-20,35,20,35,1,rgbColour(255,255,255))
			drawWideLine(-200,0,200,0,2,rgbColour(255,255,255))
			drawWideLine(-20,-35,20,-35,1,rgbColour(255,255,255))
			drawText(arial,-55,-78,"10",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,-78,"10",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-50,-70,50,-70,1,rgbColour(255,255,255))
			drawWideLine(-20,-105,20,-105,1,rgbColour(255,255,255))
			drawText(arial,-55,-148,"20",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,-148,"20",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-50,-140,50,-140,1,rgbColour(255,255,255))
			drawWideLine(-20,-175,20,-175,1,rgbColour(255,255,255))
			drawText(arial,-55,-218,"30",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,-218,"30",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-50,-210,50,-210,1,rgbColour(255,255,255))
			drawWideLine(-20,-245,20,-245,1,rgbColour(255,255,255))
			drawText(arial,-55,-288,"40",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,-288,"40",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-50,-280,50,-280,1,rgbColour(255,255,255))
			drawWideLine(-20,-315,20,-315,1,rgbColour(255,255,255))
			drawText(arial,-55,-358,"50",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,-358,"50",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-50,-350,50,-350,1,rgbColour(255,255,255))
			drawWideLine(-20,-385,20,-385,1,rgbColour(255,255,255))
			drawText(arial,-55,-428,"60",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,-428,"60",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-50,-420,50,-420,1,rgbColour(255,255,255))
			drawWideLine(-20,-455,20,-455,1,rgbColour(255,255,255))
			drawText(arial,-55,-498,"70",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,-498,"70",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-50,-490,50,-490,1,rgbColour(255,255,255))
			drawWideLine(-20,-525,20,-525,1,rgbColour(255,255,255))
			drawText(arial,-55,-568,"80",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,-568,"80",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-50,-560,50,-560,1,rgbColour(255,255,255))
			drawWideLine(-20,-595,20,-595,1,rgbColour(255,255,255))
			drawText(arial,-55,-638,"90",20,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
			drawText(arial,55,-638,"90",20,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
			drawWideLine(-50,-630,50,-630,1,rgbColour(255,255,255))
		resetClipArea()
	restoreGraphicsContext()	
	saveGraphicsContext()
		--SINGLE CUE FLIGHT DIRECTOR
		setTranslateTransform(683/2,(598/2))
		setClipArea(-217,-217,217*2,217*2)
			setRotateTransform(-1*get(globalPropertyf("sim/cockpit2/autopilot/flight_director_roll_deg")))
			setTranslateTransform(0,(-7*get(globalPropertyf("sim/cockpit2/autopilot/flight_director_pitch_deg"))))
			drawConvexPolygon({5,0,123,-40,145,-22},true,0,rgbColour(0,165,79))
			drawConvexPolygon({125,-40,147,-40,147,-22},true,0,rgbColour(0,165,79))
			drawConvexPolygon({-5,0,-123,-40,-145,-22},true,0,rgbColour(0,165,79))
			drawConvexPolygon({-125,-40,-147,-40,-147,-22},true,0,rgbColour(0,165,79))
		resetClipArea()
	restoreGraphicsContext()
	saveGraphicsContext()
		--ROLL POINTER
		setTranslateTransform(683/2,598/2)
		setRotateTransform(-1*get(globalPropertyf("sim/cockpit2/gauges/indicators/roll_electric_deg_pilot")))
		drawTriangle(-12,531-(598/2)-48,12,531-(598/2)-48,0,531-(598/2)-24,rgbColour(255,255,255))
	restoreGraphicsContext()
	--ROLL MARKER LINES
	drawRectangle(134,(598/2)-6,43,12,rgbColour(245,130,32))
	drawRectangle(683-134-43,(598/2)-6,43,12,rgbColour(245,130,32))
	drawTriangle((683/2)-12,531,(683/2)+12,531,(683/2),531-24,rgbColour(245,130,32))
	drawConvexPolygon({683/2,598/2,(683/2)+115,(598/2)-40,(683/2)+50,(598/2)-40,(683/2)+50,(598/2)-30,(683/2)-50,(598/2)-30,(683/2)-50,(598/2)-40,(683/2)-115,(598/2)-40},true,0,rgbColour(245,130,32))
	saveGraphicsContext()
		setTranslateTransform(683/2,598/2)
		setRotateTransform(-60)
		drawWideLine(0,531-(598/2),0,531-24-(598/2),2,rgbColour(255,255,255))
		setRotateTransform(15)
		drawWidePolyLine({0,531-24-(598/2),-12,531-(598/2),12,531-(598/2),0,531-24-(598/2)},2,rgbColour(255,255,255))
		setRotateTransform(15)
		drawWideLine(0,531-(598/2),0,531-24-(598/2),2,rgbColour(255,255,255))
		setRotateTransform(10)
		drawWideLine(0,531-(598/2),0,531-12-(598/2),2,rgbColour(255,255,255))
		setRotateTransform(10)
		drawWideLine(0,531-(598/2),0,531-12-(598/2),2,rgbColour(255,255,255))
		setRotateTransform(20)
		drawWideLine(0,531-(598/2),0,531-12-(598/2),2,rgbColour(255,255,255))
		setRotateTransform(10)
		drawWideLine(0,531-(598/2),0,531-12-(598/2),2,rgbColour(255,255,255))
		setRotateTransform(10)
		drawWideLine(0,531-(598/2),0,531-24-(598/2),2,rgbColour(255,255,255))
		setRotateTransform(15)
		drawWidePolyLine({0,531-24-(598/2),-12,531-(598/2),12,531-(598/2),0,531-24-(598/2)},2,rgbColour(255,255,255))
		setRotateTransform(15)
		drawWideLine(0,531-(598/2),0,531-24-(598/2),2,rgbColour(255,255,255))
	restoreGraphicsContext()
	--TEXT DISPLAYS
	if get(globalPropertyf("sim/cockpit2/gauges/indicators/radio_altimeter_height_ft_pilot")) <= 2500 then
		drawText(arial,637,44,"DH",25,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
		if get(globalPropertyf("sim/cockpit2/gauges/actuators/radio_altimeter_bug_ft_pilot")) ~= -1 then
			drawText(arial,637,14,string.format("%i",get(globalPropertyf("sim/cockpit2/gauges/actuators/radio_altimeter_bug_ft_pilot"))),35,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
		else
			drawText(arial,637,14,"OFF",35,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
		end
	end
	if get(globalPropertyf("sim/cockpit2/gauges/indicators/radio_altimeter_dh_lit_pilot")) == 1 then
		drawRectangle(425,385,62,35,rgbColour(255,255,0))
		drawRectangle(427,387,58,31,rgbColour(0,0,0))
		drawText(arial,430,390,"DH",35,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,0))
	end
	if get(globalPropertyf("sim/cockpit2/gauges/indicators/radio_altimeter_height_ft_pilot")) <= 2500 then
		drawText(arial,637,536,"RA",25,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
		drawText(arial,637,558,string.format("%i",math.floor(get(globalPropertyf("sim/cockpit2/gauges/indicators/radio_altimeter_height_ft_pilot"))/5)*5),35,false,false,TEXT_ALIGN_RIGHT,rgbColour(255,255,255))
	end
	drawText(arial,47,14,string.format("%04.2fM",get(globalPropertyf("sim/flightmodel/misc/machno"))),35,false,false,TEXT_ALIGN_LEFT,rgbColour(255,255,255))
end