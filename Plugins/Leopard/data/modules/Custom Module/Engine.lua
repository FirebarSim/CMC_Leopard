size = {685,1623}

local arial = loadFont("arial.ttf")
local sevenSeg = loadFont("7Segment.otf")

function rgbColour(r,g,b,a)
	return {r/255,g/255,b/255,a or 1}
end

local colour_deepblue = rgbColour(0,0,0)
local colour_white = rgbColour(255,255,255)
local colour_orange = rgbColour(249,165,27)
local colour_green = rgbColour(43,181,114)
local colour_red = rgbColour(255,0,0)
local colour_turquiose = rgbColour(0,206,209)
local colour_magenta = rgbColour(255,0,255)

local egt_lim_max = get(globalPropertyf("sim/aircraft/engine/acf_max_EGT"))
local egt_lim_glo = get(globalPropertyf("sim/aircraft/limits/green_lo_EGT"))
local egt_lim_ghi = get(globalPropertyf("sim/aircraft/limits/green_hi_EGT"))
local egt_lim_rhi = get(globalPropertyf("sim/aircraft/limits/red_hi_EGT"))

function draw()
	saveGraphicsContext()
		--Quad 685 x 317
		setTranslateTransform(0,1306)
		drawRectangle(0,0,685,317,colour_magenta)
	restoreGraphicsContext()
	saveGraphicsContext()
		--N1 No1
		setTranslateTransform(0,978)
		drawText(arial,685/2,317/2,"N1",55,false,false,TEXT_ALIGN_CENTER,colour_white)
		drawText(arial,685/2,317/2-20,"% RPM",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setTranslateTransform(317/2,317/2)
		drawArc(0,0,120,125,45,-2*270/12,colour_white)
		drawArc(0,0,115,125,45-(2*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(3*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(4*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(5*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(6*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(7*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(8*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(9*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(10*270/12)-2,4+9-(270/12),colour_orange)
		drawArc(0,0,120,125,45-(10*270/12)-2-14,4-10-(270/12),colour_white)
		drawText(sevenSeg,45,-15,string.format("%5.1f",get(globalPropertyfa("sim/cockpit2/engine/indicators/N1_percent"),1)),35,false,false,TEXT_ALIGN_RIGHT,colour_white)
		setRotateTransform(45)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,-45,"0",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-2*270/12)-45,"2",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-4*270/12)-45,"4",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-6*270/12)-45,"6",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-8*270/12)-45,"8",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-10*270/12)-45,"10",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform((270/12)-9)
		drawWideLine(0,110,0,125,4,colour_red)
		setRotateTransform((270/12)+9)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-12*270/12)-45,"12",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(90+((270/120)*get(globalPropertyfa("sim/cockpit2/engine/indicators/N1_percent"),1))) --Swing
		drawWideLine(0,110,0,145,4,colour_orange)
	restoreGraphicsContext()
	saveGraphicsContext()
		--N1 No2
		setTranslateTransform(0,978)
		setTranslateTransform(685-(317/2),317/2)
		drawArc(0,0,120,125,45,-2*270/12,colour_white)
		drawArc(0,0,115,125,45-(2*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(3*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(4*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(5*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(6*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(7*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(8*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(9*270/12)-2,4-(270/12),colour_green)
		drawArc(0,0,115,125,45-(10*270/12)-2,4+9-(270/12),colour_orange)
		drawArc(0,0,120,125,45-(10*270/12)-2-14,4-10-(270/12),colour_white)
		drawText(sevenSeg,45,-15,string.format("%5.1f",get(globalPropertyfa("sim/cockpit2/engine/indicators/N1_percent"),2)),35,false,false,TEXT_ALIGN_RIGHT,colour_white)
		setRotateTransform(45)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,-45,"0",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-2*270/12)-45,"2",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-4*270/12)-45,"4",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-6*270/12)-45,"6",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-8*270/12)-45,"8",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-10*270/12)-45,"10",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform((270/12)-9)
		drawWideLine(0,110,0,125,4,colour_red)
		setRotateTransform((270/12)+9)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-12*270/12)-45,"12",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(90+((270/120)*get(globalPropertyfa("sim/cockpit2/engine/indicators/N1_percent"),2))) --Swing
		drawWideLine(0,110,0,145,4,colour_orange)
	restoreGraphicsContext()
	saveGraphicsContext()
		--N2 No1
		setTranslateTransform(0,651)
		drawText(arial,685/2,317/2,"N2",55,false,false,TEXT_ALIGN_CENTER,colour_white)
		drawText(arial,685/2,317/2-20,"% RPM",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setTranslateTransform(317/2,317/2)
		drawArc(0,0,120,125,45,-2*270/12,colour_white)
		drawArc(0,0,115,125,45-(2*270/12),-8*270/12,colour_green)
		drawArc(0,0,115,125,45-(10*270/12),9-(270/12),colour_orange)
		drawArc(0,0,120,125,45-(10*270/12)-13.5,-8.5-(270/12),colour_white)
		drawText(sevenSeg,45,-15,string.format("%5.1f",get(globalPropertyfa("sim/cockpit2/engine/indicators/N2_percent"),1)),35,false,false,TEXT_ALIGN_RIGHT,colour_white)
		setRotateTransform(45+(11*270/12)-9)
		drawWideLine(0,110,0,125,4,colour_red)
		setRotateTransform((270/12)+9+90+((270/120)*get(globalPropertyfa("sim/cockpit2/engine/indicators/N2_percent"),1))) --Swing
		drawWideLine(0,110,0,145,4,colour_orange)
	restoreGraphicsContext()
	saveGraphicsContext()
		--N2 No2
		setTranslateTransform(0,651)
		setTranslateTransform(685-(317/2),317/2)
		drawArc(0,0,120,125,45,-2*270/12,colour_white)
		drawArc(0,0,115,125,45-(2*270/12),-8*270/12,colour_green)
		drawArc(0,0,115,125,45-(10*270/12),9-(270/12),colour_orange)
		drawArc(0,0,120,125,45-(10*270/12)-13.5,-8.5-(270/12),colour_white)
		drawText(sevenSeg,45,-15,string.format("%5.1f",get(globalPropertyfa("sim/cockpit2/engine/indicators/N2_percent"),2)),35,false,false,TEXT_ALIGN_RIGHT,colour_white)
		setRotateTransform(45+(11*270/12)-9)
		drawWideLine(0,110,0,125,4,colour_red)
		setRotateTransform((270/12)+9+90+((270/120)*get(globalPropertyfa("sim/cockpit2/engine/indicators/N2_percent"),2))) --Swing
		drawWideLine(0,110,0,145,4,colour_orange)
	restoreGraphicsContext()
	saveGraphicsContext()
		--EGT No1
		setTranslateTransform(0,327)
		drawText(arial,685/2,317/2,"EGT",45,false,false,TEXT_ALIGN_CENTER,colour_white)
		drawText(arial,685/2,317/2-20,"Â°C",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setTranslateTransform(317/2,317/2)
		drawArc(0,0,120,125,45,(-200/egt_lim_max)*egt_lim_glo,colour_white)
		drawArc(0,0,115,125,45+(-200/egt_lim_max)*egt_lim_glo,(-200/egt_lim_max)*(egt_lim_ghi-egt_lim_glo),colour_green)
		drawArc(0,0,115,125,45+(-200/egt_lim_max)*egt_lim_ghi,(-200/egt_lim_max)*(egt_lim_rhi-egt_lim_ghi),colour_orange)
		drawArc(0,0,110,125,45+(-200/egt_lim_max)*egt_lim_rhi,-4,colour_red)
		drawArc(0,0,120,125,45-4+(-200/egt_lim_max)*egt_lim_rhi,-225-(45-4+(-200/egt_lim_max)*egt_lim_rhi),colour_white)
		drawText(sevenSeg,45,-15,string.format("%4i",get(globalPropertyfa("sim/cockpit2/engine/indicators/EGT_deg_C"),1)),35,false,false,TEXT_ALIGN_RIGHT,colour_white)
		setRotateTransform(45+(200/egt_lim_max)*get(globalPropertyfa("sim/cockpit2/engine/indicators/EGT_deg_C"),1)) --Swing
		drawWideLine(0,110,0,145,4,colour_orange)
	restoreGraphicsContext()
	saveGraphicsContext()
		--EGT No2
		setTranslateTransform(0,327)
		setTranslateTransform(685-(317/2),317/2)
		drawArc(0,0,120,125,45,(-200/egt_lim_max)*egt_lim_glo,colour_white)
		drawArc(0,0,115,125,45+(-200/egt_lim_max)*egt_lim_glo,(-200/egt_lim_max)*(egt_lim_ghi-egt_lim_glo),colour_green)
		drawArc(0,0,115,125,45+(-200/egt_lim_max)*egt_lim_ghi,(-200/egt_lim_max)*(egt_lim_rhi-egt_lim_ghi),colour_orange)
		drawArc(0,0,110,125,45+(-200/egt_lim_max)*egt_lim_rhi,-4,colour_red)
		drawArc(0,0,120,125,45-4+(-200/egt_lim_max)*egt_lim_rhi,-225-(45-4+(-200/egt_lim_max)*egt_lim_rhi),colour_white)
		drawText(sevenSeg,45,-15,string.format("%4i",get(globalPropertyfa("sim/cockpit2/engine/indicators/EGT_deg_C"),2)),35,false,false,TEXT_ALIGN_RIGHT,colour_white)
		setRotateTransform(45+(200/egt_lim_max)*get(globalPropertyfa("sim/cockpit2/engine/indicators/EGT_deg_C"),2)) --Swing
		drawWideLine(0,110,0,145,4,colour_orange)
	restoreGraphicsContext()
	saveGraphicsContext()
		--Fuel No1
		drawText(arial,685/2,317/2,"FQ",55,false,false,TEXT_ALIGN_CENTER,colour_white)
		drawText(arial,685/2,317/2-20,"lbs x 100",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setTranslateTransform(317/2,317/2)
		drawArc(0,0,120,125,45,-270,colour_white)
		drawText(sevenSeg,45,-15,string.format("%4.2f",get(globalPropertyfa("sim/cockpit2/fuel/fuel_quantity"),1)*2.2/100),35,false,false,TEXT_ALIGN_RIGHT,colour_white)
		setRotateTransform(45)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,-45,"0",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-2*270/12)-45,"1",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-4*270/12)-45,"2",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-6*270/12)-45,"3",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-8*270/12)-45,"4",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-10*270/12)-45,"5",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform((270/12))
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform((270/12))
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-12*270/12)-45,"6",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(90+(270/600)*2.2*get(globalPropertyfa("sim/cockpit2/fuel/fuel_quantity"),1)) --Swing
		drawWideLine(0,110,0,145,4,colour_orange)
	restoreGraphicsContext()
	saveGraphicsContext()
		--Fuel No2
		setTranslateTransform(685-(317/2),317/2)
		drawArc(0,0,120,125,45,-270,colour_white)
		drawText(sevenSeg,45,-15,string.format("%4.2f",get(globalPropertyfa("sim/cockpit2/fuel/fuel_quantity"),2)*2.2/100),35,false,false,TEXT_ALIGN_RIGHT,colour_white)
		setRotateTransform(45)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,-45,"0",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-2*270/12)-45,"1",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-4*270/12)-45,"2",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-6*270/12)-45,"3",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-8*270/12)-45,"4",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform(270/12)
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-10*270/12)-45,"5",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform((270/12))
		drawWideLine(0,110,0,125,4,colour_white)
		setRotateTransform((270/12))
		drawWideLine(0,110,0,125,4,colour_white)
		drawRotatedText(arial,0,90,0,100,(-12*270/12)-45,"6",20,false,false,TEXT_ALIGN_CENTER,colour_white)
		setRotateTransform(90+(270/600)*2.2*get(globalPropertyfa("sim/cockpit2/fuel/fuel_quantity"),2)) --Swing
		drawWideLine(0,110,0,145,4,colour_orange)
	restoreGraphicsContext()
end